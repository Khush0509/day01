<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rose Day ‚ù§Ô∏è</title>

<style>

body{
margin:0;
font-family:Segoe UI, sans-serif;
background:linear-gradient(135deg,#ffe4ec,#fff0f5);
text-align:center;
overflow:hidden;
touch-action:none;
}

canvas{
background:white;
border-radius:20px;
box-shadow:0 0 20px rgba(0,0,0,0.2);
margin-top:15px;
}

/* Toolbar */
.toolbar{
margin:10px;
}

button{
padding:10px 18px;
border:none;
border-radius:12px;
background:#ff4d88;
color:white;
margin:5px;
}

input[type=color]{
width:45px;
height:40px;
border:none;
border-radius:10px;
}

/* Yay Popup */
#yayPopup{
position:fixed;
inset:0;
background:rgba(0,0,0,0.5);
display:flex;
justify-content:center;
align-items:center;
opacity:0;
pointer-events:none;
transition:0.4s;
z-index:10;
}

.yayCard{
background:white;
padding:30px;
border-radius:25px;
font-size:28px;
color:#ff0066;
}

/* PAGE 2 */
#heartPage{
display:none;
position:fixed;
inset:0;
background:linear-gradient(135deg,#ffdde1,#ee9ca7);
justify-content:center;
align-items:center;
}

.glass{
background:rgba(255,255,255,0.25);
backdrop-filter:blur(18px);
padding:30px;
border-radius:30px;
width:85%;
max-width:520px;
color:white;
font-size:18px;
line-height:1.6;
}

/* Floating roses */
.rose{
position:fixed;
bottom:-40px;
font-size:22px;
animation:float 7s linear infinite;
}

@keyframes float{
from{transform:translateY(0);}
to{transform:translateY(-110vh);}
}

</style>
</head>
<body>

<h2>Draw A Heart To Unlock ‚ù§Ô∏è</h2>

<div class="toolbar">
<input type="color" id="colorPicker">
<button onclick="useEraser()">Eraser</button>
<button onclick="clearCanvas()">Clear</button>
</div>

<canvas id="canvas"></canvas>

<!-- Yay Popup -->
<div id="yayPopup">
<div class="yayCard">Yayyyyy ‚ù§Ô∏è</div>
</div>

<!-- Page 2 -->
<div id="heartPage">
<div class="glass" id="message"></div>
</div>

<audio id="music" loop>
<source src="yay.mp3">
</audio>

<script>

const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
const heartPage=document.getElementById("heartPage");
const music=document.getElementById("music");
const messageBox=document.getElementById("message");
const colorPicker=document.getElementById("colorPicker");
const yayPopup=document.getElementById("yayPopup");

let drawing=false;
let points=[];
let erasing=false;
let currentColor="#ff0066";

/* Resize */
function resize(){
canvas.width=window.innerWidth*0.9;
canvas.height=window.innerHeight*0.45;
}
resize();
window.addEventListener("resize",resize);

/* Unlock mobile audio */
document.addEventListener("pointerdown",()=>{
music.play().then(()=>{
music.pause();
music.currentTime=0;
}).catch(()=>{});
},{once:true});

/* Color */
colorPicker.addEventListener("input",()=>{
currentColor=colorPicker.value;
erasing=false;
});

/* Eraser */
function useEraser(){
erasing=true;
}

/* Clear */
function clearCanvas(){
ctx.clearRect(0,0,canvas.width,canvas.height);
points=[];
}

/* Drawing */
canvas.addEventListener("pointerdown",(e)=>{
drawing=true;
points=[];

const rect=canvas.getBoundingClientRect();
ctx.beginPath();
ctx.moveTo(e.clientX-rect.left,e.clientY-rect.top);
});

canvas.addEventListener("pointermove",(e)=>{
if(!drawing) return;

const rect=canvas.getBoundingClientRect();
let x=e.clientX-rect.left;
let y=e.clientY-rect.top;

points.push({x,y});

ctx.lineWidth=5;
ctx.lineCap="round";

if(erasing){
ctx.globalCompositeOperation="destination-out";
}else{
ctx.globalCompositeOperation="source-over";
ctx.strokeStyle=currentColor;
}

ctx.lineTo(x,y);
ctx.stroke();
});

canvas.addEventListener("pointerup",()=>{
drawing=false;

if(checkHeart()) unlockHeart();
});

/* Easier Heart Detection */
function checkHeart(){

if(points.length < 70) return false;

let xs=points.map(p=>p.x);
let ys=points.map(p=>p.y);

let width=Math.max(...xs)-Math.min(...xs);
let height=Math.max(...ys)-Math.min(...ys);

if(height < width*0.6) return false;

let bottomPoints=points.filter(p=>p.y > Math.min(...ys)+height*0.75);

return bottomPoints.length > 8;
}

/* Unlock */
function unlockHeart(){

/* Show Yay Popup */
yayPopup.style.opacity="1";
yayPopup.style.pointerEvents="all";

/* Start music */
music.currentTime=0;
music.play().catch(()=>{});

/* After delay open page 2 */
setTimeout(()=>{

yayPopup.style.opacity="0";
yayPopup.style.pointerEvents="none";

heartPage.style.display="flex";

startRoses();
typeText();

},2500);

}

/* Roses animation */
function startRoses(){
setInterval(()=>{
let r=document.createElement("div");
r.className="rose";
r.innerHTML="üåπ";
r.style.left=Math.random()*100+"vw";
document.body.appendChild(r);
},400);
}

/* Typing Text */
const msg=`Happy Rose Day Kanishka üåπ

To be honest‚Ä¶
If i had to select A ROSE from the world,
toh mai everytime aapko hi choose karta.

U sirf ek rose nahi ho‚Ä¶
u toh most beautiful, soft aur SINGLE ROSE ho
jo shayad God ne specially meri life ke liye design kiya hai.

Just like rose makes our environment calm,
waise hi aap bhi meri life ko peaceful bana deti ho.

Your smile makes my day better, or even the best.
And when u is happy,
i feel like everything i do for u is perfect.

I may not be able to say this...
but me loves you bhoooot saraaaaa

Thank you meri life mein aane ke liye.
And thank you‚Ä¶ meri hone ke liye ‚ù§Ô∏è`;

let i=0;

function typeText(){
let interval=setInterval(()=>{
messageBox.textContent+=msg.charAt(i);
i++;
if(i>=msg.length) clearInterval(interval);
},35);
}

</script>
</body>
</html>
