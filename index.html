<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Rose Day üåπ</title>

<style>
body{
margin:0;
font-family:'Segoe UI',sans-serif;
background:linear-gradient(135deg,#fff0f5,#ffe4e1);
overflow:hidden;
text-align:center;
}

.screen{
position:absolute;
width:100%;
height:100%;
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
transition:0.7s;
}

#screen2{
opacity:0;
pointer-events:none;
}

h1{
color:#ff2e63;
font-size:40px;
}

h2{
color:#444;
font-weight:400;
}

canvas{
background:white;
border-radius:20px;
box-shadow:0 0 15px rgba(0,0,0,0.2);
}

.controls{
margin-top:15px;
}

button{
padding:10px 18px;
border:none;
border-radius:10px;
background:#ff2e63;
color:white;
cursor:pointer;
margin:5px;
}

input[type=color]{
height:40px;
width:60px;
border:none;
cursor:pointer;
}

#message{
max-width:700px;
font-size:22px;
line-height:1.7;
color:#333;
padding:20px;
}

#yay{
font-size:55px;
color:#ff2e63;
margin-bottom:15px;
}

.rose{
position:fixed;
bottom:-40px;
font-size:26px;
animation:floatUp 7s linear infinite;
opacity:0.7;
}

@keyframes floatUp{
from{transform:translateY(0);}
to{transform:translateY(-110vh);}
}
</style>
</head>

<body>

<!-- SCREEN 1 -->
<div class="screen" id="screen1">

<h1>Happy Rose Day Kanishka üåπ</h1>
<h2>Ek heart draw karo to unlock surprise ü§ç</h2>

<canvas id="canvas" width="320" height="320"></canvas>

<div class="controls">
<input type="color" id="colorPicker">
<button onclick="useEraser()">Eraser</button>
<button onclick="clearCanvas()">Clear</button>
</div>

</div>

<!-- SCREEN 2 -->
<div class="screen" id="screen2">

<div id="yay">Yayyyy ‚ù§Ô∏è</div>
<div id="message"></div>

<audio id="music" preload="auto">
<source src="yay.mp3" type="audio/mpeg">
</audio>

</div>

<script>

const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");

let drawing=false;
let points=[];
let color="#ff2e63";
let erasing=false;

document.getElementById("colorPicker").onchange=(e)=>{
color=e.target.value;
erasing=false;
};

function useEraser(){ erasing=true; }

canvas.addEventListener("mousedown",start);
canvas.addEventListener("mouseup",stop);
canvas.addEventListener("mousemove",draw);

function start(e){
drawing=true;
points=[];
ctx.beginPath();
points.push({x:e.offsetX,y:e.offsetY});
}

function stop(){
drawing=false;
detectHeart();
}

function draw(e){
if(!drawing) return;

let x=e.offsetX;
let y=e.offsetY;

points.push({x,y});

ctx.lineWidth=erasing?18:4;
ctx.strokeStyle=erasing?"white":color;
ctx.lineCap="round";

ctx.lineTo(x,y);
ctx.stroke();
}

function clearCanvas(){
ctx.clearRect(0,0,canvas.width,canvas.height);
points=[];
}

/* HEART DETECTION */
function detectHeart(){

if(points.length<120) return;

let first=points[0];
let last=points[points.length-1];

let closeDistance=Math.hypot(first.x-last.x, first.y-last.y);
if(closeDistance>60) return;

let minY=Math.min(...points.map(p=>p.y));
let maxY=Math.max(...points.map(p=>p.y));
let height=maxY-minY;

let midY=minY+height*0.25;
let topPoints=points.filter(p=>p.y<midY);

if(topPoints.length<10) return;

unlock();
}

/* UNLOCK */
function unlock(){

document.getElementById("screen1").style.opacity="0";
document.getElementById("screen1").style.pointerEvents="none";

let s2=document.getElementById("screen2");
s2.style.opacity="1";
s2.style.pointerEvents="all";

startMusic();
startRoses();
typeMessage();
}

/* MUSIC */
function startMusic(){

let music=document.getElementById("music");
music.volume=0;
music.loop=true;

music.play().then(()=>{
fadeMusic();
}).catch(()=>{
document.body.addEventListener("click",()=>{
music.play();
fadeMusic();
},{once:true});
});

function fadeMusic(){
let vol=0;
let fade=setInterval(()=>{
vol+=0.05;
if(vol>=1){
music.volume=1;
clearInterval(fade);
}else{
music.volume=vol;
}
},200);
}
}

/* ROSES */
function startRoses(){
setInterval(()=>{
let r=document.createElement("div");
r.className="rose";
r.innerHTML="üåπ";
r.style.left=Math.random()*100+"vw";
document.body.appendChild(r);
},400);
}

/* MESSAGE */
const text=`Happy Rose Day Kanishka üåπ

To be honest‚Ä¶
If i had to select A ROSE from the world,
toh mai everytime aapko hi choose karta.

U sirf ek rose nahi ho‚Ä¶
u toh most beautiful, soft aur SINGLE ROSE ho
jo shayad God ne specially meri life ke liye design kiya hai.

Just like rose makes our environment calm,
waise hi aap bhi meri life ko peaceful bana deti ho.

Your smile makes my day better, or even the best.
And when u is happy,
i feel like everything i do for u is perfect.

I may not be able to say this...
but me loves you bhoooot saraaaaa

Thank you meri life mein aane ke liye.
And thank you‚Ä¶ meri hone ke liye ‚ù§Ô∏è`;

let i=0;

function typeMessage(){
let box=document.getElementById("message");

if(i<text.length){
box.innerHTML+=text.charAt(i);
i++;
setTimeout(typeMessage,35);
}
}

</script>

</body>
</html>
